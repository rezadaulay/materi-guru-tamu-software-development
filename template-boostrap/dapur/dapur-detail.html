<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Detail Pesanan - Dapur Mie Jagoan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand fw-bold" href="dapur-list.html">Dapur MIE JAGOAN</a>
      </div>
    </nav>

    <div class="container py-5">
      <h4 class="mb-4">Detail Pesanan</h4>

      <div class="card shadow-sm">
        <div class="card-body">
          <div id="orderInfo" class="mb-3">
            <!-- Detail pesanan ditampilkan di sini -->
          </div>

          <div class="d-flex flex-column flex-md-row gap-3">
            <button class="btn btn-outline-primary flex-fill" onclick="updateStatus('processing')">Mulai Proses</button>
            <button class="btn btn-success flex-fill" onclick="updateStatus('done')">Selesai</button>
            <a href="dapur-list.html" class="btn btn-outline-dark flex-fill">Kembali</a>
          </div>
        </div>
      </div>
    </div>

    <footer class="text-center text-muted small py-3 border-top">&copy; 2025 Mie Jagoan Dapur</footer>

    <script>
      const params = new URLSearchParams(window.location.search);
      const orderId = parseInt(params.get('id'));

      const orders = [
        {id:1, table:'05', menu:'Nasi Goreng, Es Teh', total:23000, status:'Baru'},
        {id:2, table:'07', menu:'Mie Ayam', total:15000, status:'Baru'}
      ];

      const order = orders.find(o => o.id === orderId);

      if (!order) {
        document.getElementById('orderInfo').innerHTML = '<p class="text-danger">Pesanan tidak ditemukan.</p>';
      } else {
        document.getElementById('orderInfo').innerHTML = `
          <p><strong>No Meja:</strong> ${order.table}</p>
          <p><strong>Menu:</strong> ${order.menu}</p>
          <p><strong>Total:</strong> Rp ${order.total.toLocaleString('id-ID')}</p>
          <p><strong>Status:</strong> <span class="badge bg-secondary">${order.status}</span></p>
        `;
      }

      function updateStatus(status) {
        if (!order) return;

        if (status === 'processing') {
          order.status = 'Diproses';
          alert('Pesanan sedang dimasak.');
        } else if (status === 'done') {
          order.status = 'Selesai';
          alert('Pesanan selesai dimasak.');
          window.location.href = 'dapur-list.html';
        }

        document.getElementById('orderInfo').innerHTML = `
          <p><strong>No Meja:</strong> ${order.table}</p>
          <p><strong>Menu:</strong> ${order.menu}</p>
          <p><strong>Total:</strong> Rp ${order.total.toLocaleString('id-ID')}</p>
          <p><strong>Status:</strong> <span class="badge ${order.status === 'Selesai' ? 'bg-success' : 'bg-warning text-dark'}">${order.status}</span></p>
        `;
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
